---
const today = new Date();
import contactIconRaw from "../../assets/icons/contact-icon.svg?raw";
import Button from "../ui/button/Button.astro";

function sanitizeToWhite(svg: string, size = 18) {
  let s = svg
    .replace(/<\?xml[\s\S]*?\?>/g, "")
    .replace(/width=\"[^\"]*\"/g, "")
    .replace(/height=\"[^\"]*\"/g, "")
    .replace(/fill=\"[^\"]*\"/gi, 'fill="currentColor"')
    .replace(/stroke=\"[^\"]*\"/gi, 'stroke="none"');
  s = s.replace(/<svg([^>]*)>/, (m, attrs) => `<svg${attrs} width="${size}" height="${size}">`);
  return s;
}

const contactIcon = sanitizeToWhite(contactIconRaw);
---

<footer id="contact" class="py-16 px-4 text-center border-t border-[color:var(--color-border-light)]">
  <h2 class="text-2xl md:text-4xl font-bold text-foreground">Ganas de aprender, listo para aportar.</h2>
  <p class="mt-4 text-[color:var(--color-text-muted)] max-w-md mx-auto">
   Con ganas de aprender de perfiles senior y aplicar mi base técnica en Front-end para construir soluciones sólidas y escalables.
  </p>
  
  <div class="mt-8 flex justify-center">
    <Button href="mailto:teocastellvi.m@gmail.com" variant="primary" size="lg">
      <span class="inline-flex mr-2" aria-hidden="true" set:html={contactIcon} />
      Enviame un correo
    </Button>
  </div>

  <div class="mt-12 flex flex-col md:flex-row items-center justify-between gap-4 text-sm text-[color:var(--color-text-muted)] max-w-5xl mx-auto border-t border-[color:var(--color-border-light)] pt-8">
    <div>
      &copy; {today.getFullYear()} <strong>Teo Castellví</strong>. Construido con Astro y Clean Code.
    </div>
    
    <div class="flex gap-6">
      <a href="https://github.com/TeoCastellvi" target="_blank" class="hover:text-[color:var(--accent)] transition-colors">GitHub</a>
      <a href="https://www.linkedin.com/in/teo-castellvi" target="_blank" class="hover:text-[color:var(--accent)] transition-colors">LinkedIn</a>
    </div>
  </div>
</footer>